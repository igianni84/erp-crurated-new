# Ralph Progress Log
Started: Tue Feb  3 21:41:29 CET 2026
---

## Codebase Patterns
- Use `HasUuid` trait for UUID primary keys (models should use `$table->uuid('id')->primary()` in migrations)
- Use `Auditable` trait for audit logging (requires `created_by`, `updated_by` columns and `auditLogs()` MorphMany relation)
- Use `SoftDeletes` trait for soft deletion support
- Enums should include `label()`, `color()`, and `icon()` methods for Filament UI compatibility
- Commercial entities go in `app/Enums/Commercial/` and `app/Models/Commercial/`
- Migration naming: `YYYY_MM_DD_NNNNNN_action_table_name.php` where NNNNNN is sequence number

---

## 2026-02-03 - US-001
- What was implemented:
  - ChannelType enum (b2c, b2b, private_club) with label/color/icon methods
  - ChannelStatus enum (active, inactive) with label/color/icon methods
  - Channel model with HasUuid, Auditable, SoftDeletes traits
  - channels migration with all required fields (name, channel_type, default_currency, allowed_commercial_models JSON, status)
- Files changed:
  - app/Enums/Commercial/ChannelType.php (created)
  - app/Enums/Commercial/ChannelStatus.php (created)
  - app/Models/Commercial/Channel.php (created)
  - database/migrations/2026_02_03_380000_create_channels_table.php (created)
- **Learnings for future iterations:**
  - Follow the existing enum pattern with label(), color(), icon() methods for Filament compatibility
  - Channel model serves as the foundational commercial entity - other entities (PriceBook, Offer) will reference it
  - allowed_commercial_models is a JSON array that can contain 'voucher_based' and 'sell_through'
---

## 2026-02-03 - US-002
- What was implemented:
  - PriceBookStatus enum (draft, active, expired, archived)
  - PricingPolicyStatus enum (draft, active, paused, archived)
  - PricingPolicyType enum (cost_plus_margin, reference_price_book, index_based, fixed_adjustment, rounding)
  - PricingPolicyInputSource enum (cost, emp, price_book, external_index)
  - OfferStatus enum (draft, active, paused, expired, cancelled)
  - OfferType enum (standard, promotion, bundle)
  - OfferVisibility enum (public, restricted)
  - ExecutionCadence enum (manual, scheduled, event_triggered)
  - All enums follow the established pattern with label(), color(), icon() methods
- Files changed:
  - app/Enums/Commercial/PriceBookStatus.php (created)
  - app/Enums/Commercial/PricingPolicyStatus.php (created)
  - app/Enums/Commercial/PricingPolicyType.php (created)
  - app/Enums/Commercial/PricingPolicyInputSource.php (created)
  - app/Enums/Commercial/OfferStatus.php (created)
  - app/Enums/Commercial/OfferType.php (created)
  - app/Enums/Commercial/OfferVisibility.php (created)
  - app/Enums/Commercial/ExecutionCadence.php (created)
- **Learnings for future iterations:**
  - The established enum pattern continues to work well for all commercial status/type enums
  - PHPStan config has an unused ignored pattern for "trait.unused" - this is a config issue, not code issue
  - Enums provide consistent Filament UI elements through color() and icon() methods
---
