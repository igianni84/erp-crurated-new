## Codebase Patterns

- Modular structure: Models in app/Models/{Module}/, Filament in app/Filament/Resources/{Module}/
- Use `./vendor/bin/pint --test` to check code style without making changes
- Laravel Pint is pre-configured in Laravel 12 as the default linter
- Use `php artisan test` to run all tests
- .env is configured for MySQL but falls back works with SQLite for testing
- MySQL 9.6.0 runs via `brew services start mysql`, CLI at `/opt/homebrew/bin/mysql`
- Use `php artisan db:show` to check database connection status
- Database `crurated_erp` uses utf8mb4_unicode_ci collation
- Use `composer quality` to run all quality checks (lint, analyse, test)
- Use `composer lint` to auto-fix code style, `composer lint:test` to check only
- PHPStan/Larastan configured at level 5 via phpstan.neon
- Pre-commit hook runs lint:test on staged PHP files

---

# Progress Log

## 2026-02-03 - US-001
- What was implemented:
  - Initialized Laravel 12.49.0 project using `laravel new`
  - Configured .env and .env.example for MySQL (crurated_erp database)
  - Updated composer.json project name to crurated/erp
  - Initialized git repository on ralph/infrastructure branch
  - Added additional entries to .gitignore (SQLite, .last-branch, temp files)
- Files changed:
  - .env, .env.example (MySQL configuration)
  - .gitignore (added SQLite, temp files)
  - composer.json (project name)
  - All Laravel 12 scaffold files
- **Learnings for future iterations:**
  - Laravel 12 comes with Pint pre-installed for linting
  - Default database is SQLite, need to explicitly configure MySQL
  - `php artisan serve` starts on port 8000 by default
  - Laravel 12 has built-in test infrastructure (PHPUnit + example tests)
---

## 2026-02-03 - US-002
- What was implemented:
  - Installed MySQL 9.6.0 via Homebrew (`brew install mysql`)
  - Started MySQL service (`brew services start mysql`)
  - Created `crurated_erp` database with utf8mb4_unicode_ci collation
  - Verified Laravel .env configuration connects correctly
  - Ran `php artisan migrate` successfully (users, cache, jobs tables)
  - Verified all tables and columns use snake_case naming convention
- Files changed:
  - No code files changed - this was database infrastructure setup
  - prd.json (marked US-002 as passing)
  - progress.txt (this log)
- **Learnings for future iterations:**
  - MySQL CLI on macOS is at `/opt/homebrew/bin/mysql`
  - Use `brew services start mysql` to start the MySQL daemon
  - Use `php artisan db:show` to verify database connection and see stats
  - Laravel 12 default migrations create: users, cache, cache_locks, jobs, job_batches, failed_jobs, password_reset_tokens, sessions, migrations tables
  - All Laravel migrations follow snake_case convention by default
---

## 2026-02-03 - US-003
- What was implemented:
  - Verified Laravel Pint v1.27.0 already installed
  - Installed Larastan v3.9.2 (PHPStan for Laravel) at level 5
  - Created phpstan.neon configuration file
  - Added composer scripts: lint, lint:test, analyse, quality
  - Created pre-commit hook (.git/hooks/pre-commit) for automated lint checks
  - Verified all quality checks pass (pint, phpstan, tests)
- Files changed:
  - composer.json (added larastan dependency, new scripts)
  - composer.lock (updated dependencies)
  - phpstan.neon (new file - PHPStan configuration)
  - .git/hooks/pre-commit (new file - lint hook)
  - prd.json (marked US-003 as passing)
  - progress.txt (this log)
- **Learnings for future iterations:**
  - PHPStan v2+ removed `checkMissingIterableValueType` option
  - Larastan provides Laravel-specific PHPStan extensions
  - Use `--memory-limit=512M` for PHPStan on larger projects
  - Pre-commit hooks must be executable (`chmod +x`)
  - Composer script `quality` runs all checks in sequence for CI/CD
---

## 2026-02-03 - US-004
- What was implemented:
  - Created modular directory structure for the ERP
  - app/Models/Pim/ for PIM (Product Information Management) module models
  - app/Filament/Resources/Pim/ for PIM-related Filament resources
  - app/Enums/ for application enumerations
  - app/Services/ for business logic services
  - app/Traits/ for reusable traits
  - Added .gitkeep files to track empty directories in git
  - Verified PSR-4 autoloading via existing App\\ namespace in composer.json
- Files changed:
  - app/Models/Pim/.gitkeep (new)
  - app/Filament/Resources/Pim/.gitkeep (new)
  - app/Enums/.gitkeep (new)
  - app/Services/.gitkeep (new)
  - app/Traits/.gitkeep (new)
  - prd.json (marked US-004 as passing)
  - progress.txt (this log)
- **Learnings for future iterations:**
  - Laravel's PSR-4 autoload with App\\ prefix auto-maps all app/ subdirectories
  - Use .gitkeep files to track empty directories in git
  - Namespace convention: App\Models\Pim\, App\Enums\, App\Services\, App\Traits\
  - Filament resources go in app/Filament/Resources/ with subdirs for modules
---

